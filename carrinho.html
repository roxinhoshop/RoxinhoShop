<!DOCTYPE html>
<!-- ===== Roxinho Shop - E-COMMERCE DE ELETR√îNICOS ===== -->
<!-- Desenvolvido por Gabriel (gabwvr) -->
<!-- Design responsivo com identidade visual roxo e amarelo -->

<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carrinho | Roxinho Shop</title>

    <!-- Favicon -->
  <link rel="icon" type="image/png" href="images/favicon-rooxyce.png">

  <!-- CSS -->
  <link rel="stylesheet" href="css/carrinho.css">
  <link rel="stylesheet" href="css/cabecalhorodape.css">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />

  <div id="header-placeholder"></div>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@200..1000&display=swap" rel="stylesheet">
</head>
<body>
    
      <!-- ======================= CABE√áALHO ======================= -->
  <nav class="cabecalho">
    <div class="container-cabecalho">
      <!-- LOGO -->
      <a class="logo" href="home.html">
        <img src="images/logo-rooxyce.png" alt="Roxinho Shop" class="logo-imagem">
      </a>

      <!-- BARRA DE PESQUISA CENTRALIZADA -->
      <div class="caixa-pesquisa-centralizada">
        <input type="text" id="campo-busca-global" placeholder="Buscar produtos, marcas ou categorias..." autocomplete="off">
        <button type="button" id="botao-busca-global" class="botao-busca">
          <i class="fa-solid fa-magnifying-glass"></i>
        </button>
        <!-- Dropdown de sugest√µes -->
        <div id="sugestoes-busca" class="sugestoes-busca" style="display: none;">
          <!-- Sugest√µes ser√£o inseridas aqui via JavaScript -->
        </div>
      </div>

      <!-- √çCONES DE A√á√ïES R√ÅPIDAS -->
      <div class="icones">
        <!-- üîπ Calculador de CEP -->
        <div class="caixa-cep">
          <i class="fa-solid fa-map-marker-alt icone-cep"></i>
          <div class="texto">
            <input type="text" id="input-cep" placeholder="Digite seu CEP" maxlength="9" class="input-cep">
            <span class="resultado-cep" id="resultado-cep">Consultar frete</span>
          </div>
        </div>

        <!-- üîπ Lista de Desejos -->
        <div class="caixa-desejos">
          <a href="#" id="botao-desejos" class="botao-desejos">
            <i class="fa-solid fa-heart icone-desejos"></i>
            <span id="contador-desejos" class="contador-desejos">0</span>
          </a>
          <!-- Dropdown da lista de desejos -->
          <div id="dropdown-desejos" class="dropdown-desejos" style="display: none;">
            <div class="cabecalho-desejos">
              <h4>Lista de Desejos</h4>
              <span id="total-desejos">0 itens</span>
            </div>
            <div id="lista-desejos-conteudo" class="lista-desejos-conteudo">
              <p class="lista-vazia">Sua lista de desejos est√° vazia</p>
            </div>
            <div class="rodape-desejos">
              <a href="painelusuario.html#desejos" class="ver-todos-desejos">Ver todos os desejos</a>
            </div>
          </div>
        </div>

        <!-- üîπ Caixinha de Login -->
        <div class="caixa-entre" id="caixa-login">
          <img src="imagens/default.png" alt="Avatar" class="avatar" id="avatar-usuario" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiM3YzNhZWQiLz4KPHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4PSI4IiB5PSI4Ij4KPHBhdGggZD0iTTEyIDEyQzE0LjIwOTEgMTIgMTYgMTAuMjA5MSAxNiA4QzE2IDUuNzkwODYgMTQuMjA5MSA0IDEyIDRDOS43OTA4NiA4IDUuNzkwODYgOCA4QzggMTAuMjA5MSA5Ljc5MDg2IDEyIDEyIDEyWiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTEyIDE0QzguMTM0MDEgMTQgNSAxNy4xMzQxIDUgMjFIOUgxNUgxOUMxOSAxNy4xMzQxIDE1Ljg2NiAxNCAxMiAxNFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo8L3N2Zz4K'">
          <div class="texto" id="texto-login">
            <strong id="status-login">Entre</strong>
            <br><span id="subtexto-login">Login</span>
          </div>
          <i class="fa-solid fa-arrow-right seta" id="seta-login"></i>
          <!-- Dropdown do usu√°rio logado -->
          <div id="dropdown-usuario" class="dropdown-usuario" style="display: none;">
            <div class="opcoes-usuario">
              <a href="painelusuario.html"><i class="fa-solid fa-user"></i> Minha Conta</a>
              <a href="painelusuario.html#pedidos"><i class="fa-solid fa-box"></i> Meus Pedidos</a>
              <a href="painelusuario.html#desejos"><i class="fa-solid fa-heart"></i> Lista de Desejos</a>
              <a href="#" id="botao-logout"><i class="fa-solid fa-sign-out-alt"></i> Sair</a>
            </div>
          </div>
        </div>

        <!-- üîπ Caixa do Carrinho -->
        <a href="carrinho.html" class="caixa-carrinho">
          <i class="fa-solid fa-cart-shopping icone-carrinho"></i>
            <span id="contadorCarrinho" class="contador-carrinho">0</span>
        </a>
      </div>
    </div>
  </nav>

    <!-- Main Content -->
    <main class="conteudo-principal">
        <!-- Empty Cart State -->
        <div id="carrinho-vazio" class="estado-carrinho-vazio">
            <div class="conteudo-vazio">
                <div class="icone-carrinho-vazio">
                    <i class="fas fa-shopping-cart"></i>
                </div>
                <h2 class="titulo-vazio">N√£o h√° produtos no carrinho</h2>
                <p class="descricao-vazia">Que tal dar uma olhada em nossos produtos incr√≠veis? Temos as melhores ofertas esperando por voc√™!</p>
                <button class="botao-continuar-compras" onclick="continuarComprando()">
                    <i class="fas fa-arrow-left"></i>
                    Continuar Comprando
                </button>
            </div>
        </div>

        <!-- Cart Content -->
        <div id="conteudo-carrinho" class="layout-carrinho">
            <!-- Products Section -->
            <div class="secao-produtos">
                <!-- Select All Header -->
                <div class="cartao-selecionar-todos">
                    <div class="conteudo-selecionar">
                        <div class="grupo-checkbox">
                            <input type="checkbox" id="selecionar-todos" class="checkbox-personalizado">
                            <div class="info-carrinho-header">
                                <h2 class="titulo-carrinho">Carrinho (<span id="total-itens">0</span>)</h2>
                                <p class="subtitulo-carrinho">
                                    <span id="itens-selecionados">0</span> de <span id="total-itens-subtitulo">0</span> itens selecionados
                                </p>
                            </div>
                        </div>
                        
                        <button id="botao-selecionar-todos" class="botao-selecionar">
                            <i class="fas fa-check-circle"></i>
                            <span id="texto-selecionar">Selecionar Todos</span>
                        </button>
                    </div>
                </div>

                <!-- Products List -->
                <div id="lista-produtos" class="lista-produtos">
                    <!-- Products will be inserted here dynamically -->
                </div>
            </div>

            <!-- Summary Section -->
            <div class="secao-resumo">
                <!-- Order Summary -->
                <div class="cartao-resumo">
                    <div class="cabecalho-resumo">
                        <div class="titulo-com-icone">
                            <i class="fas fa-receipt"></i>
                            <h2 class="titulo-resumo">Resumo da Compra</h2>
                        </div>
                        <div id="status-selecao" class="status-selecao">0 de 0 selecionados</div>
                    </div>

                    <!-- Selection Alert -->
                    <div id="alerta-selecao" class="alerta-selecao" style="display: none;">
                        <div class="conteudo-alerta">
                            <i class="fas fa-exclamation-triangle icone-alerta"></i>
                            <span id="texto-alerta">Nenhum item selecionado</span>
                        </div>
                    </div>

                    <!-- Free Shipping Progress -->
                    <div id="progresso-frete" class="progresso-frete" style="display: none;">
                        <div class="conteudo-frete">
                            <i class="fas fa-truck icone-caminhao"></i>
                            <div class="info-frete">
                                <div class="cabecalho-frete">
                                    <span class="titulo-frete">Frete Gr√°tis em R$ 99,00</span>
                                    <span id="porcentagem-frete" class="porcentagem">0%</span>
                                </div>
                                
                                <div class="barra-progresso">
                                    <div id="progresso-barra" class="progresso-preenchido"></div>
                                </div>
                                
                                <p id="texto-frete" class="descricao-frete">Faltam R$ 99,00 para frete gr√°tis!</p>
                            </div>
                        </div>
                    </div>

                    <!-- Price Breakdown -->
                    <div class="detalhamento-precos">
                        <div class="linha-preco">
                            <span class="descricao-preco">
                                Subtotal (<span id="subtotal-itens">0</span> <span id="subtotal-texto">itens</span>)
                            </span>
                            <span id="valor-subtotal" class="valor-preco">R$ 0,00</span>
                        </div>

                        <div id="linha-desconto" class="linha-preco linha-desconto" style="display: none;">
                            <span class="descricao-preco">Desconto</span>
                            <span id="valor-desconto" class="valor-desconto">-R$ 0,00</span>
                        </div>

                        <div class="linha-preco">
                            <div class="descricao-com-icone">
                                <i class="fas fa-truck icone-pequeno"></i>
                                <span class="descricao-preco">Frete</span>
                            </div>
                            <span id="valor-frete" class="valor-frete">R$ 15,99</span>
                        </div>

                        <div class="divisor"></div>

                        <div class="linha-total">
                            <span class="titulo-total">Total</span>
                            <span id="valor-total" class="valor-total">R$ 0,00</span>
                        </div>
                    </div>
                </div>

                <!-- Coupon Section -->
                <div id="secao-cupom" class="cartao-cupom">
                    <div class="cabecalho-cupom">
                        <div class="titulo-com-icone">
                            <i class="fas fa-tag"></i>
                            <h3 class="titulo-cupom">Cupom de Desconto</h3>
                        </div>
                    </div>

                    <!-- Applied Coupon -->
                    <div id="cupom-aplicado" class="cupom-ativo" style="display: none;">
                        <div class="conteudo-cupom-ativo">
                            <div class="icone-cupom-ativo">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="info-cupom">
                                <div class="titulo-cupom-ativo">Cupom Aplicado</div>
                                <div class="codigo-cupom">C√≥digo: <span id="codigo-aplicado">DESCONTO10</span></div>
                            </div>
                        </div>
                        <button id="remover-cupom" class="botao-remover-cupom">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>

                    <!-- Coupon Form -->
                    <div id="formulario-cupom" class="formulario-cupom">
                        <div class="entrada-cupom">
                            <input type="text" id="input-cupom" class="campo-cupom" placeholder="Digite seu cupom" maxlength="20">
                            <button id="aplicar-cupom" class="botao-aplicar-cupom">
                                <span class="texto-botao">APLICAR</span>
                                <div class="carregamento" style="display: none;">
                                    <div class="spinner"></div>
                                </div>
                            </button>
                        </div>
                        
                        <div class="cupons-disponiveis">
                            <div class="titulo-cupons">Cupons dispon√≠veis:</div>
                            <div class="lista-cupons">
                                <button class="botao-cupom-disponivel" data-cupom="DESCONTO10">
                                    <i class="fas fa-tag icone-tag"></i>
                                    DESCONTO10
                                </button>
                                <button class="botao-cupom-disponivel" data-cupom="WELCOME50">
                                    <i class="fas fa-tag icone-tag"></i>
                                    WELCOME50
                                </button>
                                <button class="botao-cupom-disponivel" data-cupom="FRETE15">
                                    <i class="fas fa-tag icone-tag"></i>
                                    FRETE15
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Checkout Button -->
                <button id="finalizar-compra" class="botao-finalizar" disabled>
                    <i class="fas fa-credit-card"></i>
                    <span>Continuar a Compra</span>
                    <i class="fas fa-arrow-right"></i>
                </button>

                <!-- Security Info -->
                <div class="cartao-seguranca">
                    <div class="selo-seguranca">
                        <i class="fas fa-shield-alt icone-seguranca"></i>
                        <div class="texto-seguranca">
                            <div class="titulo-seguranca">Compra 100% Segura</div>
                            <div class="descricao-seguranca">Dados protegidos e criptografados</div>
                        </div>
                    </div>

                    <div class="formas-pagamento">
                        <div class="titulo-pagamentos">Formas de pagamento:</div>
                        <div class="bandeiras-cartao">
                            <div class="bandeira">VISA</div>
                            <div class="bandeira">Master</div>
                            <div class="bandeira">PIX</div>
                            <div class="bandeira">Boleto</div>
                        </div>
                    </div>

                    <div class="info-adicional">Ambiente seguro. Seus dados est√£o protegidos.</div>
                </div>
            </div>
        </div>
    </main>

    <!-- Notifica√ß√µes (Toast) -->
    <div id="container-notificacoes" class="container-notificacoes"></div>

  <div id="footer-placeholder"></div>

  <!-- JS -->
     <script src="js/database.js"></script>
  <script src="js/produtos.js"></script>
  <script src="js/carrinho.js"></script>

    <script>
  fetch('cabecalhorodape.html')
    .then(response => response.text())
    .then(data => {
      const parser = new DOMParser();
      const doc = parser.parseFromString(data, 'text/html');

      const footer = doc.querySelector('footer.rodape');

      if (footer) document.getElementById('footer-placeholder').appendChild(footer);

      // Executar scripts do cabecalho/rodape
      doc.querySelectorAll("script").forEach(oldScript => {
        const newScript = document.createElement("script");
        if (oldScript.src) newScript.src = oldScript.src;
        else newScript.textContent = oldScript.textContent;
        document.body.appendChild(newScript);
      });
    });

  // Controlar exibi√ß√£o da barra de progresso baseado no conte√∫do do carrinho
  document.addEventListener('DOMContentLoaded', function() {
    function atualizarBarraProgresso() {
      const carrinhoVazio = document.getElementById('carrinho-vazio');
      const progressoCheckout = document.getElementById('progresso-checkout');
      
      if (carrinhoVazio && progressoCheckout) {
        // Se carrinho est√° vazio (display n√£o √© 'none'), ocultar barra de progresso
        const carrinhoEstaVazio = window.getComputedStyle(carrinhoVazio).display !== 'none';
        
        if (carrinhoEstaVazio) {
          progressoCheckout.style.display = 'none';
        } else {
          progressoCheckout.style.display = 'block';
        }
      }
    }
    
    // Verificar inicialmente
    setTimeout(atualizarBarraProgresso, 100);
    
    // Observar mudan√ßas no carrinho
    const observer = new MutationObserver(atualizarBarraProgresso);
    const carrinhoVazio = document.getElementById('carrinho-vazio');
    if (carrinhoVazio) {
      observer.observe(carrinhoVazio, { attributes: true, attributeFilter: ['style'] });
    }
  });
  </script>
    <script src="./js/sistema-xp.js"></script>
</body>
</html>